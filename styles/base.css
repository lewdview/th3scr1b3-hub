@layer reset, base, components, utilities;

@layer reset {
  *, *::before, *::after { box-sizing: border-box; }
  html, body { height: 100%; }
  body, h1, p { margin: 0; }
}

@layer base {
  :root {
    --bg: #0a0c10;
    --bg-2: #0d1117;
    --text: #e6edf3;
    --accent-1: #00d1ff;
    --accent-2: #ffe600;
    --accent-3: #29ffb6;
    --shadow: 0 0 24px rgba(0, 209, 255, 0.25);
    --brand-size: clamp(3rem, 8vw + 1rem, 9rem);
    --brand-glow1: 0.35; /* alpha for cyan glow */
    --brand-glow2: 0.15; /* alpha for yellow glow */
  }

  body {
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    background: radial-gradient(1200px 800px at 50% 50%, #0f1320 0%, var(--bg) 60%, #05060a 100%);
    color: var(--text);
    line-height: 1.4;
    overflow: auto; /* allow page scroll */
    scroll-behavior: smooth;
  }

  .hero {
    position: relative;
    min-height: 100vh;
    width: 100vw;
    isolation: isolate;
  }

  #energy-wave {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
    opacity: 0;
    transition: opacity 240ms ease;
  }
}

@layer components {
  .stats-bg {
    position: absolute;
    inset: 0;
    z-index: -2; /* bottom-most within hero stacking context */
    pointer-events: none;
    overflow: hidden;
    filter: blur(0.7px) brightness(0.95);
    transition: filter 140ms ease;
  }
  .stats-bg.boost { filter: blur(0.7px) brightness(1.25) saturate(1.2); }
  .stats-bg__item {
    position: absolute;
    bottom: 6vh;
    left: 50%;
    font-weight: 900;
    letter-spacing: 0.08em;
    font-size: clamp(1.2rem, 3.4vw, 3rem);
    color: rgba(230, 237, 243, 0.10);
    white-space: nowrap;
    /* Default background mode: pulse + drift */
    animation-name: fadeOpacity, driftX;
    animation-duration: 8s, var(--drift-dur, 12s);
    animation-iteration-count: infinite, infinite;
    animation-timing-function: ease-in-out, ease-in-out;
  }
  /* Rainfall variant overrides animations to fall from top and fade out */
  .stats-bg__item--rain {
    top: 0; bottom: auto; /* position relative to top */
    left: 0; /* actual x via left% inline */
    /* Typography: slimmer and smaller */
    font-family: "Helvetica Neue", "Arial Narrow", Arial, system-ui, sans-serif;
    font-weight: 600;
    font-stretch: 85%; /* browsers supporting font-stretch */
    letter-spacing: 0.02em;
    line-height: 1;
    font-size: clamp(0.8rem, 2.2vw, 1.8rem);

    /* Neon gradient fill */
    color: transparent;
    background: linear-gradient(135deg, #00eaff 0%, #ff00ff 50%, #ffe600 100%);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    background-clip: text;
    /* Glow only (no black stroke) */
    text-shadow:
      0 0 2px #ffffff,          /* subtle inner white edge */
      0 0 8px rgba(0, 234, 255, 0.9),
      0 0 18px rgba(255, 0, 255, 0.6);

    animation-name: rainOpacity, rainFall;
    animation-duration: var(--dur, 10s), var(--dur, 10s);
    animation-delay: var(--delay, 0s), var(--delay, 0s);
    animation-iteration-count: 1, 1;
    animation-timing-function: ease-in-out, linear; /* smoother opacity */
    animation-fill-mode: forwards, forwards;
    will-change: transform, opacity;
  }
  @keyframes fadeOpacity {
    0% { opacity: 0; }
    10% { opacity: 0.8; }
    70% { opacity: 0.8; }
    100% { opacity: 0; }
  }
  @keyframes driftX {
    0%   { transform: translateX(calc(var(--dx, 0px) - var(--amp, 8px))) translateY(0); }
    50%  { transform: translateX(calc(var(--dx, 0px) + var(--amp, 8px))) translateY(0); }
    100% { transform: translateX(calc(var(--dx, 0px) - var(--amp, 8px))) translateY(0); }
  }
  @keyframes rainFall {
    0%   { transform: translateY(-12vh); }
    100% { transform: translateY(112vh); }
  }
  @keyframes rainOpacity {
    0% { opacity: 0; }
    50% { opacity: 0.66; }
    100% { opacity: 0; }
  }

  .stats {
    position: absolute;
    right: 24px;
    bottom: 24px;
    z-index: 2;
    max-width: min(38vw, 460px);
    padding: 14px 16px;
    border-radius: 14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.025));
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 8px 28px rgba(0,0,0,0.35);
  }
  .stats__header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
  .stats__handle { font-weight: 900; letter-spacing: 0.04em; }
  .stats__badge { font-size: 0.8rem; padding: 2px 8px; border-radius: 999px; background: rgba(0,209,255,0.18); border: 1px solid rgba(0,209,255,0.35); }
  .stats__grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px 14px;
  }
  .stat { display: flex; justify-content: space-between; align-items: center; gap: 10px; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06); border-radius: 10px; padding: 8px 10px; }
  .stat__label { opacity: 0.85; font-size: 0.82rem; }
  .stat__value { font-weight: 800; font-variant-numeric: tabular-nums; }
  .stats__links { margin-top: 10px; display: flex; gap: 10px; flex-wrap: wrap; }
  .stats__links a { color: var(--text); opacity: 0.9; text-decoration: none; border-bottom: 1px dashed rgba(255,255,255,0.25); }

  .tracks {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: calc(50% + 9rem);
    display: flex;
    gap: 14px;
    z-index: 2;
    padding: 10px 12px;
    border-radius: 14px;
    /* subtle glass background for contrast */
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.015));
    border: 1px solid rgba(255,255,255,0.06);
    box-shadow: 0 8px 30px rgba(0,0,0,0.25);
    max-width: min(92vw, 1200px);
    overflow-x: auto;
    overflow-y: hidden;
    scroll-behavior: smooth;
    scrollbar-width: thin; /* Firefox */
    scrollbar-color: rgba(0,209,255,0.9) rgba(0, 40, 60, 0.35);
    backdrop-filter: blur(6px) saturate(120%);
  }
  /* WebKit custom scrollbar for carousel */
  .tracks::-webkit-scrollbar { height: 12px; }
  .tracks::-webkit-scrollbar-track { background: linear-gradient(90deg, rgba(0,40,60,0.35), rgba(0,0,0,0.2)); border-radius: 999px; }
  .tracks::-webkit-scrollbar-thumb {
    background: linear-gradient(90deg, #00d1ff, #ffe600);
    border-radius: 999px;
    border: 3px solid rgba(0,0,0,0); /* padding via transparent border */
    background-clip: padding-box;
    box-shadow: 0 4px 12px rgba(0,0,0,0.35);
  }
  .tracks:hover::-webkit-scrollbar-thumb { filter: saturate(125%) brightness(1.05); }
  .tracks::-webkit-scrollbar-thumb:active { filter: saturate(140%) brightness(1.10); }
  .tracks::-webkit-scrollbar-corner { background: transparent; }

  .tracks-nav {
    position: absolute;
    top: calc(50% + 9rem + 60px);
    transform: translateY(-50%);
    z-index: 3;
    width: 42px;
    height: 42px;
    border-radius: 50%;
    border: 1px solid rgba(255,255,255,0.12);
    background: radial-gradient(100px 100px at 50% 50%, rgba(0,209,255,0.25), rgba(0,209,255,0.08));
    color: var(--text);
    font-weight: 900;
    box-shadow: 0 10px 30px rgba(0,0,0,0.35), 0 0 18px rgba(0,209,255,0.2);
    display: none; /* toggled via JS when scrollable */
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }
  .tracks-nav--left { left: max(8px, 3vw); }
  .tracks-nav--right { right: max(8px, 3vw); }
  .tracks-nav--shuffle { right: calc(max(8px, 3vw) + 52px); }
  .tracks-nav:hover { filter: saturate(120%) brightness(1.05); }

  .tile {
    position: relative;
    width: 120px;
    height: 120px;
    flex: 0 0 auto;
    border-radius: 12px;
    overflow: hidden;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.06);
    transition: width 260ms cubic-bezier(.2,.8,.2,1), transform 260ms ease, box-shadow 260ms ease;
    box-shadow: 0 4px 16px rgba(0,0,0,0.25);
  }
  .tile:hover, .tile:focus-within {
    width: 320px;
    transform: translateY(-2px);
    box-shadow: 0 12px 36px rgba(0,0,0,0.35), 0 0 24px rgba(0, 209, 255, 0.2);
  }

  .tile__art, .tile__art img {
    position: absolute;
    inset: 0;
    width: 120px;
    height: 120px;
    display: block;
    object-fit: cover;
  }

  .tile__info {
    position: absolute;
    left: 120px;
    top: 0;
    height: 100%;
    width: 200px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 8px;
    padding: 12px;
    background: linear-gradient(90deg, rgba(3,19,24,0.85), rgba(3,19,24,0.6));
    transform: translateX(100%);
    transition: transform 260ms cubic-bezier(.2,.8,.2,1);
    border-left: 1px solid rgba(255,255,255,0.06);
  }
  .tile:hover .tile__info, .tile:focus-within .tile__info { transform: translateX(0); }

  .tile__title {
    font-weight: 800;
    font-size: 0.95rem;
    line-height: 1.2;
    letter-spacing: 0.02em;
  }
  .tile__meta { opacity: 0.85; font-variant-numeric: tabular-nums; font-size: 0.85rem; }

  .tile__play {
    align-self: flex-start;
    appearance: none;
    border: 0;
    border-radius: 999px;
    padding: 8px 12px;
    background: radial-gradient(100px 100px at 50% 50%, rgba(255,230,0,0.35), rgba(255,230,0,0.12));
    color: #0b0f12;
    font-weight: 900;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.15), 0 8px 20px rgba(255,230,0,0.2);
    cursor: pointer;
  }
  .tile__play:hover { filter: saturate(120%) brightness(1.05); }

  .brand {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-weight: 900;
    letter-spacing: 0.06em;
    font-stretch: 100%;
    font-size: var(--brand-size);
    line-height: 0.9;
    text-transform: lowercase;

    /* animated neon gradient text */
    background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
    background-size: 200% 200%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: glowGradient 6s ease-in-out infinite alternate;

    filter: drop-shadow(0 0 20px rgba(0, 209, 255, var(--brand-glow1))) drop-shadow(0 0 40px rgba(255, 230, 0, var(--brand-glow2)));
    will-change: filter;
  }

  @keyframes glowGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 50% 50%; }
    100% { background-position: 100% 50%; }
  }

  .player {
    position: fixed; /* keep in view during scroll */
    top: 24px;
    left: 24px;
    z-index: 10;
    width: min(340px, 42vw);
    user-select: none;
    cursor: grab;
    background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
    backdrop-filter: blur(8px) saturate(120%);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 14px;
    box-shadow: var(--shadow);
    padding: 14px 16px;
  }
  .player:active { cursor: grabbing; }

  .player__art {
    position: relative;
    width: 100%;
    aspect-ratio: 1 / 1;
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 10px;
    background: radial-gradient(200px 200px at 30% 30%, rgba(0,209,255,0.25), rgba(255,230,0,0.12));
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06), 0 6px 20px rgba(0,0,0,0.35);
  }
  .player__art img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .player__title {
    font-weight: 800;
    font-size: 1rem;
    letter-spacing: 0.04em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 8px;
  }

  .player__progress {
    position: relative;
    width: 100%;
    height: 6px;
    border-radius: 999px;
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
    overflow: hidden;
    cursor: pointer;
    margin: 10px 0 8px;
    touch-action: none; /* prevent scroll/pan from interfering and stray moves */
    user-select: none;
  }
  .player__progress-fill {
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 0%;
    background: linear-gradient(90deg, rgba(0,209,255,0.8), rgba(255,230,0,0.8));
    box-shadow: 0 0 14px rgba(0,209,255,0.35);
  }

  .player__controls {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .btn {
    appearance: none;
    border: 0;
    border-radius: 999px;
    padding: 10px 14px;
    background: radial-gradient(120px 120px at 50% 50%, rgba(0, 209, 255, 0.35), rgba(0, 209, 255, 0.12));
    color: #031318;
    font-weight: 900;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.15), 0 8px 24px rgba(0, 209, 255, 0.25);
  }
  .btn:hover { filter: saturate(120%) brightness(1.05); }

  .time {
    margin-left: auto;
    font-variant-numeric: tabular-nums;
    opacity: 0.8;
  }

  .latest {
    position: absolute;
    top: 24px;
    right: 24px;
    z-index: 2;
    font-weight: 900;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    padding: 10px 12px;
    border-radius: 12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 0 24px rgba(255, 230, 0, 0.2);
    color: var(--text);
    text-decoration: none;
  }
  .latest:hover { text-decoration: underline; }
  /* Section labels and layout */
  .section-label, .section__header {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: calc(50% + 9rem - 46px); /* above the tracks carousel */
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 2;
    padding: 6px 10px;
    border-radius: 10px;
    background: rgba(0,0,0,0.25);
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 6px 18px rgba(0,0,0,0.28);
    backdrop-filter: blur(6px) saturate(120%);
  }
  .label__logo { display: block; }
  .label__text { font-weight: 900; letter-spacing: 0.06em; opacity: 0.9; }

  .section {
    position: relative;
    padding: 80px 24px;
    max-width: 1200px;
    margin: 0 auto;
  }
  .section__body { margin-top: 16px; }
  .spacer { height: 24vh; }
  .placeholder { opacity: 0.75; font-style: italic; }

  /* Player hint */
  .player__hint {
    position: absolute;
    right: 10px;
    top: 10px;
    z-index: 2;
    background: white;
    color: #0b0f12;
    border-radius: 8px;
    padding: 4px 8px;
    font-weight: 800;
    letter-spacing: 0.02em;
    box-shadow: 0 6px 18px rgba(0,0,0,0.28);
    pointer-events: none; /* clicks pass through */
  }

}

@layer utilities {
  @media (max-width: 720px) {
    .player { width: min(92vw, 360px); left: 12px; top: 12px; }
    .latest { right: 12px; top: 12px; }
  }
}

