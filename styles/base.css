@layer reset, base, components, utilities;

@layer reset {
  *, *::before, *::after { box-sizing: border-box; }
  html, body { height: 100%; }
  body, h1, p { margin: 0; }
}

@layer base {
  :root {
    --bg: #0a0c10;
    --bg-2: #0d1117;
    --bg-surface: rgba(15, 20, 30, 0.85);
    --text: #e6edf3;
    --text-dim: #8b949e;
    --accent-1: #00d1ff;
    --accent-2: #ffe600;
    --accent-3: #29ffb6;
    --accent-4: #ff006e;
    --shadow: 0 0 24px rgba(0, 209, 255, 0.25);
    --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.4), 0 8px 24px rgba(0, 209, 255, 0.15);
    --brand-size: clamp(3rem, 8vw + 1rem, 9rem);
    --brand-glow1: 0.35; /* alpha for cyan glow */
    --brand-glow2: 0.15; /* alpha for yellow glow */
    --glass: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04));
    --glass-border: rgba(255,255,255,0.15);
    --transition-smooth: cubic-bezier(0.4, 0.0, 0.2, 1);
    --transition-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  body {
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    background: radial-gradient(1200px 800px at 50% 50%, #0f1320 0%, var(--bg) 60%, #05060a 100%);
    color: var(--text);
    line-height: 1.4;
    overflow: auto; /* allow page scroll */
    scroll-behavior: smooth;
  }

  .hero {
    position: relative;
    min-height: 100vh;
    width: 100vw;
    isolation: isolate;
  }

  #energy-wave {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
    opacity: 0;
    transition: opacity 240ms ease;
  }
  #backdrop-vis {
    position: fixed; /* persist across pages */
    inset: 0;
    width: 100vw;
    height: 100vh;
    z-index: 0; /* below content, above body background */
    pointer-events: none;
    opacity: 0;
    transition: opacity 600ms ease;
    filter: blur(0.5px) saturate(120%);
  }
}

@layer components {
  /* Visualizer mobile controls */
  .vis-controls {
    position: absolute;
    left: 50%;
    bottom: 14px;
    transform: translateX(-50%);
    z-index: 3;
    display: none; /* default hidden on desktop */
    align-items: center;
    gap: 8px;
    padding: 6px 8px;
    border-radius: 12px;
    background: linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.2));
    border: 1px solid rgba(255,255,255,0.12);
    box-shadow: 0 6px 22px rgba(0,0,0,0.35);
    backdrop-filter: blur(8px) saturate(120%);
  }
  .vis-controls__btn {
    appearance: none;
    border: 0;
    border-radius: 10px;
    width: 34px; height: 34px;
    display: grid; place-items: center;
    font-weight: 900;
    color: var(--text);
    background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.12);
  }
  .vis-controls__modes { display: flex; gap: 6px; }
  .vis-controls__mode {
    appearance: none;
    border: 0;
    border-radius: 8px;
    width: 28px; height: 28px;
    display: grid; place-items: center;
    font-weight: 900; font-size: 0.85rem;
    color: var(--text);
    background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.12);
    opacity: 0.85;
  }
  .vis-controls__mode.is-active {
    background: linear-gradient(180deg, rgba(0,209,255,0.35), rgba(0,209,255,0.15));
    box-shadow: inset 0 0 0 1px rgba(0,209,255,0.55), 0 0 18px rgba(0,209,255,0.25);
    opacity: 1;
  }

  .stats-bg {
    position: absolute;
    inset: 0;
    z-index: -2; /* bottom-most within hero stacking context */
    pointer-events: none;
    overflow: hidden;
    filter: blur(0.7px) brightness(0.95);
    transition: filter 140ms ease;
  }
  .stats-bg.boost { filter: blur(0.7px) brightness(1.25) saturate(1.2); }
  .stats-bg__item {
    position: absolute;
    bottom: 6vh;
    left: 50%;
    font-weight: 900;
    letter-spacing: 0.08em;
    font-size: clamp(1.2rem, 3.4vw, 3rem);
    color: rgba(230, 237, 243, 0.10);
    white-space: nowrap;
    /* Default background mode: pulse + drift */
    animation-name: fadeOpacity, driftX;
    animation-duration: 8s, var(--drift-dur, 12s);
    animation-iteration-count: infinite, infinite;
    animation-timing-function: ease-in-out, ease-in-out;
  }
  /* Rainfall variant overrides animations to fall from top and fade out */
  .stats-bg__item--rain {
    top: 0; bottom: auto; /* position relative to top */
    left: 0; /* actual x via left% inline */
    /* Typography: slimmer and smaller */
    font-family: "Helvetica Neue", "Arial Narrow", Arial, system-ui, sans-serif;
    font-weight: 600;
    font-stretch: 85%; /* browsers supporting font-stretch */
    letter-spacing: 0.02em;
    line-height: 1;
    font-size: clamp(0.8rem, 2.2vw, 1.8rem);

    /* Neon gradient fill */
    color: transparent;
    background: linear-gradient(135deg, #00eaff 0%, #ff00ff 50%, #ffe600 100%);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    background-clip: text;
    /* Glow only (no black stroke) */
    text-shadow:
      0 0 2px #ffffff,          /* subtle inner white edge */
      0 0 8px rgba(0, 234, 255, 0.9),
      0 0 18px rgba(255, 0, 255, 0.6);

    animation-name: rainOpacity, rainFall;
    animation-duration: var(--dur, 10s), var(--dur, 10s);
    animation-delay: var(--delay, 0s), var(--delay, 0s);
    animation-iteration-count: 1, 1;
    animation-timing-function: ease-in-out, linear; /* smoother opacity */
    animation-fill-mode: forwards, forwards;
    will-change: transform, opacity;
  }
  @keyframes fadeOpacity {
    0% { opacity: 0; }
    10% { opacity: 0.8; }
    70% { opacity: 0.8; }
    100% { opacity: 0; }
  }
  @keyframes driftX {
    0%   { transform: translateX(calc(var(--dx, 0px) - var(--amp, 8px))) translateY(0); }
    50%  { transform: translateX(calc(var(--dx, 0px) + var(--amp, 8px))) translateY(0); }
    100% { transform: translateX(calc(var(--dx, 0px) - var(--amp, 8px))) translateY(0); }
  }
  @keyframes rainFall {
    0%   { transform: translateY(-12vh); }
    100% { transform: translateY(112vh); }
  }
  @keyframes rainOpacity {
    0% { opacity: 0; }
    50% { opacity: 0.66; }
    100% { opacity: 0; }
  }

  .stats {
    position: absolute;
    right: 24px;
    bottom: 24px;
    z-index: 2;
    max-width: min(38vw, 460px);
    padding: 14px 16px;
    border-radius: 14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.025));
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 8px 28px rgba(0,0,0,0.35);
  }
  .stats__header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
  .stats__handle { font-weight: 900; letter-spacing: 0.04em; }
  .stats__badge { font-size: 0.8rem; padding: 2px 8px; border-radius: 999px; background: rgba(0,209,255,0.18); border: 1px solid rgba(0,209,255,0.35); }
  .stats__grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px 14px;
  }
  .stat { display: flex; justify-content: space-between; align-items: center; gap: 10px; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06); border-radius: 10px; padding: 8px 10px; }
  .stat__label { opacity: 0.85; font-size: 0.82rem; }
  .stat__value { font-weight: 800; font-variant-numeric: tabular-nums; }
  .stats__links { margin-top: 10px; display: flex; gap: 10px; flex-wrap: wrap; }
  .stats__links a { color: var(--text); opacity: 0.9; text-decoration: none; border-bottom: 1px dashed rgba(255,255,255,0.25); }

  /* Tracks toolbar */
  .tracks-toolbar {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: calc(50% + 9rem - 68px);
    z-index: 2;
    max-width: min(92vw, 1200px);
    width: 100%;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 14px;
    border-radius: 14px 14px 0 0;
    background: var(--glass);
    backdrop-filter: blur(12px) saturate(130%);
    border: 1px solid var(--glass-border);
    border-bottom: none;
    box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  }
  .tracks-toolbar__search {
    flex: 1;
    min-width: 0;
  }
  .tracks-toolbar__input {
    width: 100%;
    padding: 10px 14px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(0, 0, 0, 0.35);
    color: var(--text);
    font-size: 0.95rem;
    font-weight: 500;
    transition: all 200ms var(--transition-smooth);
    outline: none;
  }
  .tracks-toolbar__input::placeholder {
    color: var(--text-dim);
    opacity: 0.7;
  }
  .tracks-toolbar__input:focus {
    border-color: var(--accent-1);
    background: rgba(0, 0, 0, 0.5);
    box-shadow: 0 0 0 3px rgba(0, 209, 255, 0.1), 0 0 16px rgba(0, 209, 255, 0.15);
  }
  .tracks-toolbar__controls {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .tracks-toolbar__select {
    padding: 10px 14px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(0, 0, 0, 0.35);
    color: var(--text);
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 200ms var(--transition-smooth);
    outline: none;
  }
  .tracks-toolbar__select:hover {
    border-color: var(--accent-1);
    background: rgba(0, 0, 0, 0.5);
  }
  .tracks-toolbar__select:focus {
    border-color: var(--accent-1);
    box-shadow: 0 0 0 3px rgba(0, 209, 255, 0.1);
  }
  .tracks-toolbar__btn {
    appearance: none;
    border: 0;
    border-radius: 10px;
    padding: 10px 14px;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.12);
    color: var(--text);
    font-size: 1.2rem;
    line-height: 1;
    cursor: pointer;
    transition: all 200ms var(--transition-smooth);
  }
  .tracks-toolbar__btn:hover {
    background: rgba(255,255,255,0.10);
    transform: scale(1.05);
  }
  .tracks-toolbar__btn.is-active {
    background: linear-gradient(135deg, rgba(255,0,110,0.25), rgba(255,0,110,0.15));
    border-color: rgba(255,0,110,0.35);
    color: var(--accent-4);
    box-shadow: 0 0 18px rgba(255, 0, 110, 0.25);
  }

  .tracks {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: calc(50% + 9rem);
    display: flex;
    gap: 14px;
    z-index: 2;
    padding: 10px 12px;
    border-radius: 0 0 14px 14px;
    /* subtle glass background for contrast */
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.015));
    border: 1px solid rgba(255,255,255,0.06);
    border-top: none;
    box-shadow: 0 8px 30px rgba(0,0,0,0.25);
    max-width: min(92vw, 1200px);
    overflow-x: auto;
    overflow-y: hidden;
    scroll-behavior: smooth;
    scrollbar-width: thin; /* Firefox */
    scrollbar-color: rgba(0,209,255,0.9) rgba(0, 40, 60, 0.35);
    backdrop-filter: blur(6px) saturate(120%);
  }
  /* WebKit custom scrollbar for carousel */
  .tracks::-webkit-scrollbar { height: 12px; }
  .tracks::-webkit-scrollbar-track { background: linear-gradient(90deg, rgba(0,40,60,0.35), rgba(0,0,0,0.2)); border-radius: 999px; }
  .tracks::-webkit-scrollbar-thumb {
    background: linear-gradient(90deg, #00d1ff, #ffe600);
    border-radius: 999px;
    border: 3px solid rgba(0,0,0,0); /* padding via transparent border */
    background-clip: padding-box;
    box-shadow: 0 4px 12px rgba(0,0,0,0.35);
  }
  .tracks:hover::-webkit-scrollbar-thumb { filter: saturate(125%) brightness(1.05); }
  .tracks::-webkit-scrollbar-thumb:active { filter: saturate(140%) brightness(1.10); }
  .tracks::-webkit-scrollbar-corner { background: transparent; }

  .tracks-nav {
    position: absolute;
    top: calc(50% + 9rem + 60px);
    transform: translateY(-50%);
    z-index: 3;
    width: 42px;
    height: 42px;
    border-radius: 50%;
    border: 1px solid rgba(255,255,255,0.12);
    background: radial-gradient(100px 100px at 50% 50%, rgba(0,209,255,0.25), rgba(0,209,255,0.08));
    color: var(--text);
    font-weight: 900;
    box-shadow: 0 10px 30px rgba(0,0,0,0.35), 0 0 18px rgba(0,209,255,0.2);
    display: none; /* toggled via JS when scrollable */
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }
  .tracks-nav--left { left: max(8px, 3vw); }
  .tracks-nav--right { right: max(8px, 3vw); }
  .tracks-nav--shuffle { right: calc(max(8px, 3vw) + 52px); }
  .tracks-nav--toggle { left: calc(max(8px, 3vw) + 52px); }
  .tracks-nav:hover { filter: saturate(120%) brightness(1.05); }

  .tile {
    position: relative;
    width: 120px;
    height: 120px;
    flex: 0 0 auto;
    border-radius: 12px;
    overflow: hidden;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.06);
    transition: width 260ms cubic-bezier(.2,.8,.2,1), transform 260ms ease, box-shadow 260ms ease, border-color 200ms ease;
    box-shadow: 0 4px 16px rgba(0,0,0,0.25);
  }
  .tile:hover, .tile:focus-within {
    width: 320px;
    transform: translateY(-2px);
    box-shadow: 0 12px 36px rgba(0,0,0,0.35), 0 0 24px rgba(0, 209, 255, 0.2);
  }

  /* Favorite heart icon */
  .tile__favorite {
    position: absolute;
    top: 8px;
    right: 8px;
    z-index: 10;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.15);
    background: rgba(0, 0, 0, 0.65);
    backdrop-filter: blur(6px);
    color: var(--text);
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 0;
    transform: scale(0.85);
    transition: all 220ms var(--transition-spring);
  }
  .tile:hover .tile__favorite,
  .tile__favorite.is-favorited {
    opacity: 1;
    transform: scale(1);
  }
  .tile__favorite:hover {
    transform: scale(1.15);
    background: rgba(0, 0, 0, 0.8);
    border-color: rgba(255,255,255,0.25);
  }
  .tile__favorite.is-favorited {
    color: var(--accent-4);
    background: rgba(255, 0, 110, 0.15);
    border-color: rgba(255, 0, 110, 0.35);
    box-shadow: 0 0 16px rgba(255, 0, 110, 0.25);
  }
  .tile__favorite.is-favorited:hover {
    background: rgba(255, 0, 110, 0.25);
  }

  .tile__art, .tile__art img {
    position: absolute;
    inset: 0;
    width: 120px;
    height: 120px;
    display: block;
    object-fit: cover;
  }

  .tile__info {
    position: absolute;
    left: 120px;
    top: 0;
    height: 100%;
    width: 200px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 8px;
    padding: 12px;
    background: linear-gradient(90deg, rgba(3,19,24,0.85), rgba(3,19,24,0.6));
    transform: translateX(100%);
    transition: transform 260ms cubic-bezier(.2,.8,.2,1);
    border-left: 1px solid rgba(255,255,255,0.06);
  }
  .tile:hover .tile__info, .tile:focus-within .tile__info { transform: translateX(0); }

  .tile__title {
    font-weight: 800;
    font-size: 0.95rem;
    line-height: 1.2;
    letter-spacing: 0.02em;
  }
  .tile__meta { opacity: 0.85; font-variant-numeric: tabular-nums; font-size: 0.85rem; }

  .tile__play {
    align-self: flex-start;
    appearance: none;
    border: 0;
    border-radius: 999px;
    padding: 8px 12px;
    background: radial-gradient(100px 100px at 50% 50%, rgba(255,230,0,0.35), rgba(255,230,0,0.12));
    color: #0b0f12;
    font-weight: 900;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.15), 0 8px 20px rgba(255,230,0,0.2);
    cursor: pointer;
  }
  .tile__play:hover { filter: saturate(120%) brightness(1.05); }

  /* Now playing indicator: show a thin gradient line instead of a big hover square */
  .tile.is-playing {
    /* prevent the wide hover expansion for the active tile */
  }
  .tile.is-playing::after {
    content: '';
    position: absolute;
    left: 0; right: 0; bottom: 0;
    height: 3px;
    background: linear-gradient(90deg, #00d1ff, #ffe600);
    box-shadow: 0 0 12px rgba(0, 209, 255, 0.45);
    pointer-events: none;
  }
  .tile.is-playing:hover, .tile.is-playing:focus-within {
    width: 120px; /* don't expand */
    transform: none;
    box-shadow: 0 4px 16px rgba(0,0,0,0.25);
  }
  .tile.is-playing .tile__info,
  .tile.is-playing:hover .tile__info,
  .tile.is-playing:focus-within .tile__info { transform: translateX(100%); }

  .brand {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-weight: 900;
    letter-spacing: 0.06em;
    font-stretch: 100%;
    font-size: var(--brand-size);
    line-height: 0.9;
    text-transform: lowercase;

    /* animated neon gradient text */
    background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
    background-size: 200% 200%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: glowGradient 6s ease-in-out infinite alternate;

    filter: drop-shadow(0 0 20px rgba(0, 209, 255, var(--brand-glow1))) drop-shadow(0 0 40px rgba(255, 230, 0, var(--brand-glow2)));
    will-change: filter;
  }

  @keyframes glowGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 50% 50%; }
    100% { background-position: 100% 50%; }
  }

  .player {
    position: fixed; /* keep in view during scroll */
    top: 24px;
    left: 24px;
    z-index: 9999; /* always on top */
    width: min(340px, 42vw);
    user-select: none;
    cursor: grab;
    background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
    backdrop-filter: blur(8px) saturate(120%);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 14px;
    box-shadow: var(--shadow);
    padding: 14px 16px;
  }
  .player:active { cursor: grabbing; }

  .player__art {
    position: relative;
    width: 100%;
    aspect-ratio: 1 / 1;
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 10px;
    background: radial-gradient(200px 200px at 30% 30%, rgba(0,209,255,0.25), rgba(255,230,0,0.12));
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06), 0 6px 20px rgba(0,0,0,0.35);
  }
  .player__art img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .player__title {
    font-weight: 800;
    font-size: 1rem;
    letter-spacing: 0.04em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 8px;
  }

  .player__progress {
    position: relative;
    width: 100%;
    height: 6px;
    border-radius: 999px;
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
    overflow: hidden;
    cursor: pointer;
    margin: 10px 0 8px;
    touch-action: none; /* prevent scroll/pan from interfering and stray moves */
    user-select: none;
  }
  .player__progress-fill {
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 0%;
    background: linear-gradient(90deg, rgba(0,209,255,0.8), rgba(255,230,0,0.8));
    box-shadow: 0 0 14px rgba(0,209,255,0.35);
  }

  .player__controls {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .btn {
    appearance: none;
    border: 0;
    border-radius: 999px;
    padding: 10px 14px;
    background: radial-gradient(120px 120px at 50% 50%, rgba(0, 209, 255, 0.35), rgba(0, 209, 255, 0.12));
    color: #031318;
    font-weight: 900;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.15), 0 8px 24px rgba(0, 209, 255, 0.25);
    cursor: pointer;
    transition: all 200ms var(--transition-smooth);
  }
  .btn:hover { filter: saturate(120%) brightness(1.05); transform: scale(1.05); }
  .btn--prev, .btn--next, .btn--loop {
    padding: 8px 12px;
    font-size: 0.9rem;
  }
  .btn--loop {
    opacity: 0.6;
  }

  .player__volume {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid rgba(255,255,255,0.08);
  }
  .btn-icon {
    appearance: none;
    border: 0;
    background: transparent;
    color: var(--text);
    font-size: 1.1rem;
    line-height: 1;
    cursor: pointer;
    opacity: 0.85;
    transition: all 180ms ease;
  }
  .btn-icon:hover {
    opacity: 1;
    transform: scale(1.1);
  }
  .player__volume-slider {
    flex: 1;
    appearance: none;
    height: 4px;
    border-radius: 999px;
    background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
    outline: none;
    cursor: pointer;
  }
  .player__volume-slider::-webkit-slider-thumb {
    appearance: none;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
    box-shadow: 0 2px 8px rgba(0, 209, 255, 0.35);
    cursor: pointer;
    transition: all 180ms var(--transition-spring);
  }
  .player__volume-slider::-webkit-slider-thumb:hover {
    transform: scale(1.2);
    box-shadow: 0 4px 12px rgba(0, 209, 255, 0.5);
  }
  .player__volume-slider::-moz-range-thumb {
    width: 14px;
    height: 14px;
    border: 0;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
    box-shadow: 0 2px 8px rgba(0, 209, 255, 0.35);
    cursor: pointer;
    transition: all 180ms var(--transition-spring);
  }
  .player__volume-slider::-moz-range-thumb:hover {
    transform: scale(1.2);
    box-shadow: 0 4px 12px rgba(0, 209, 255, 0.5);
  }

  .time {
    margin-left: auto;
    font-variant-numeric: tabular-nums;
    opacity: 0.8;
  }
  .player__nav {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .navbtn {
    appearance: none;
    border: 0;
    border-radius: 999px;
    padding: 6px 10px;
    text-decoration: none;
    color: var(--text);
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.12);
    font-weight: 800;
    letter-spacing: 0.04em;
    font-size: 0.85rem;
  }
  .navbtn:hover { filter: saturate(120%) brightness(1.05); }
  .navbtn.is-active {
    background: linear-gradient(180deg, rgba(0,209,255,0.35), rgba(0,209,255,0.15));
    box-shadow: inset 0 0 0 1px rgba(0,209,255,0.55), 0 0 16px rgba(0,209,255,0.25), 0 0 28px rgba(255,230,0,0.15);
    color: #06141a;
    text-shadow: 0 1px 0 rgba(255,255,255,0.25);
  }

  .latest {
    position: absolute;
    top: 24px;
    right: 24px;
    z-index: 2;
    font-weight: 900;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    padding: 10px 12px;
    border-radius: 12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 0 24px rgba(255, 230, 0, 0.2);
    color: var(--text);
    text-decoration: none;
  }
  .latest:hover { text-decoration: underline; }
  /* Section labels and layout */
  .section-label, .section__header {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: calc(50% + 9rem - 46px); /* above the tracks carousel */
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 2;
    padding: 6px 10px;
    border-radius: 10px;
    background: rgba(0,0,0,0.25);
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 6px 18px rgba(0,0,0,0.28);
    backdrop-filter: blur(6px) saturate(120%);
  }
  .label__logo { display: block; }
  .label__text { font-weight: 900; letter-spacing: 0.06em; opacity: 0.9; }

  .section {
    position: relative;
    padding: 80px 24px;
    max-width: 1200px;
    margin: 0 auto;
  }
  .section__body { margin-top: 16px; }
  .spacer { height: 24vh; }
  .placeholder { opacity: 0.75; font-style: italic; }

  /* YouTube section styles */
  .youtube-setup {
    text-align: center;
    padding: 48px 24px;
    max-width: 800px;
    margin: 0 auto;
  }
  .youtube-setup h3 {
    font-size: 1.5rem;
    font-weight: 900;
    margin-bottom: 16px;
    background: linear-gradient(135deg, #FF0000, #FF6B6B);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }
  .youtube-setup code {
    background: rgba(255,255,255,0.1);
    padding: 2px 8px;
    border-radius: 4px;
    font-family: ui-monospace, monospace;
    font-size: 0.9em;
  }
  .youtube-channel-btn {
    display: inline-block;
    margin-top: 24px;
    padding: 12px 24px;
    border-radius: 12px;
    background: linear-gradient(135deg, #FF0000, #CC0000);
    color: white;
    text-decoration: none;
    font-weight: 700;
    box-shadow: 0 8px 24px rgba(255, 0, 0, 0.3);
    transition: all 200ms var(--transition-smooth);
  }
  .youtube-channel-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 32px rgba(255, 0, 0, 0.4);
  }
  .youtube-section__title {
    font-size: 1.3rem;
    font-weight: 800;
    margin: 0 0 16px 0;
    color: var(--text);
  }
  .youtube-card {
    transition: transform 200ms ease;
  }
  .youtube-card:hover {
    transform: translateY(-4px);
  }

  /* Page-mode: show only selected page; hide hero chrome and other sections */
  body.page-mode .section,
  body.page-mode .spacer { display: none !important; }
  body.page-mode .hero #brand,
  body.page-mode .hero #latest-song,
  body.page-mode .hero .section-label,
  body.page-mode .hero #tracks,
  body.page-mode .hero #tracks-left,
  body.page-mode .hero #tracks-right,
  body.page-mode .hero #tracks-toggle,
  body.page-mode .hero #tracks-shuffle,
  body.page-mode .hero #stats,
  body.page-mode .hero #stats-bg,
  body.page-mode .hero #energy-wave,
  body.page-mode .hero #vis-controls { display: none !important; }
  /* Hide entire hero container in page-mode to avoid scroll offset */
  /* In page-mode, shrink hero to remove scroll offset but keep the player visible */
  body.page-mode .hero { min-height: 0 !important; height: 0 !important; overflow: hidden !important; }
  body.page-mode .hero > *:not(#floating-player) { display: none !important; }
  /* Keep the fixed player and fixed #backdrop-vis visible */

  /* Page close button */
  .page-close {
    position: fixed;
    top: 16px;
    right: 16px;
    z-index: 9998;
    width: 40px;
    height: 40px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.15);
    background: linear-gradient(180deg, rgba(0,0,0,0.65), rgba(0,0,0,0.35));
    color: var(--text);
    font-size: 22px;
    line-height: 1;
    font-weight: 900;
    box-shadow: 0 8px 24px rgba(0,0,0,0.35), 0 0 16px rgba(0,209,255,0.2);
    display: none; /* hidden by default */
    place-items: center;
    cursor: pointer;
  }
  .page-close:hover {
    filter: saturate(120%) brightness(1.05);
    box-shadow: 0 10px 28px rgba(0,0,0,0.4), 0 0 22px rgba(0,209,255,0.28);
  }
  body.page-mode .page-close { display: grid; }

  /* Standard content pages */
  .page {
    position: relative;
    display: none; /* hidden until activated */
    min-height: 100vh;
    padding: 80px 24px;
    max-width: 1100px;
    margin: 0 auto;
    background: rgba(0,0,0,0.8); /* readable overlay */
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 14px;
    box-shadow: 0 12px 36px rgba(0,0,0,0.4);
  }
  .page.is-active { display: block; }
  .page__title {
    font-weight: 900;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    font-size: clamp(1.4rem, 3.2vw, 2rem);
    background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }
  .page__body { margin-top: 12px; opacity: 0.96; }

  /* Player hint */
  .player__hint {
    position: absolute;
    right: 10px;
    top: 10px;
    z-index: 2;
    background: white;
    color: #0b0f12;
    border-radius: 8px;
    padding: 4px 8px;
    font-weight: 800;
    letter-spacing: 0.02em;
    box-shadow: 0 6px 18px rgba(0,0,0,0.28);
    pointer-events: none; /* clicks pass through */
  }

}

@layer utilities {
  @media (max-width: 720px) {
    .player { width: min(92vw, 360px); left: 12px; top: 12px; }
    .latest { right: 12px; top: 12px; }
    .vis-controls { display: flex; }
    
    /* Mobile toolbar adjustments */
    .tracks-toolbar {
      flex-direction: column;
      gap: 8px;
      padding: 12px;
    }
    .tracks-toolbar__search {
      width: 100%;
    }
    .tracks-toolbar__controls {
      width: 100%;
      justify-content: space-between;
    }
    .tracks-toolbar__select {
      flex: 1;
      min-width: 0;
    }
  }
}

